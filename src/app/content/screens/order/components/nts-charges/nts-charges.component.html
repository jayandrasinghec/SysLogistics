<div class="page-container sp-component-container nts-charges mt15">
    <div class="sp-component-container-inner auto-height">
        <h4 class="title">N-T-S Charges </h4>
        <div class="top-content">
            <div class="row">
                <div class="col-md-3">
                    <div class=" field-row mob-mb0">
                        <label class="label-nomandatory width_70px">Main Group:</label>
                        <div class="input-text-con calc_width_70">

                          <app-dropdown-grid [gridList]="mainGroupUniqueOptions" [headers]="mainGroupHeaders"
                          [required]="true"
                          [displayKey]="mainGroupHeaders[0][1]"
                          (selection)="mainGroupSelecthandler($event,mainGroupHeaders[0][1])"
                          [selectedValue]="ntsModel.group_Main"
                          [reset]="ddReset" [isEditMode]="true" [jsonField]="'group_Main'"></app-dropdown-grid>

                        </div>
                    </div>
                    <div class="field-row mb0">
                        <label class="label-nomandatory width_70px">Sub Group:</label>
                        <div class="input-text-con calc_width_70">

                          <app-dropdown-grid [gridList]="subGroupOptions" [headers]="subGroupHeaders"
                          [required]="true"
                          [displayKey]="subGroupHeaders[0][1]"
                          (selection)="subGroupSelecthandler($event,subGroupHeaders[0][1])"
                          [selectedValue]="ntsModel.group_Sub"
                          [reset]="ddReset" [isEditMode]="true" [jsonField]="'group_Sub'"></app-dropdown-grid>

                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="field-row mb0">
                        <label class="label-nomandatory width_70px align-top">Description:</label>
                        <div class="input-text-con calc_width_70">
                           <app-textarea [height]="" 
                           [class]="!txtAreaValid ? 'error' : ''"
                           [value]="ntsModel.description"
                           (modelChange)="descriptionChangehandler($event)"
                           (focusOutEvent)="focusOutFunction($event)"
                           [isEditMode]="true"
                           [jsonField]="'description'"></app-textarea>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 paddright0 mob-paddlr15">
                    <div class="field-row mob-mb0">
                        <label class="label-nomandatory width_70px mb0">Chargeable Amount:</label>
                        <div class="input-text-con calc_width_70">
                          <app-input-dollar
                          [value]="ntsModel.chargeable_Amount"
                          [required]="true"
                          (modelChange)="charageableAMTChangehandler($event)" [placeHolder]="''" [isEditMode]="true" [jsonField]="'chargeable_Amount'"></app-input-dollar>
                        </div>
                    </div>
                    <div class="field-row mb0">
                        <label class="label-nomandatory width_70px mb0">Charged Amount:</label>
                        <div class="input-text-con calc_width_70">
                          <app-input-dollar
                          [value]="ntsModel.charged_Amount"
                          [required]="true"
                          (modelChange)="charagedAMTChangehandler($event)" [placeHolder]="''" [isEditMode]="true" [jsonField]="'charged_Amount'"></app-input-dollar>
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="d-flex align-items-center justify-content-end h-100">
                        <button  class="btn btn-primary float-right tab-w110px" type="button" (click)="addItem($event)" *ngIf="!isEditmode" >Add</button>
                        <button  class="btn btn-primary float-right tab-w110px" type="button" (click)="updateItem($event)" *ngIf="isEditmode" >Update</button>
                    </div>
                </div>
            </div>
        </div>


        <div class="table-wrapper">
            <table class="table table-striped table-bordered table-fixed">
                <thead>
                    <tr>
                        <th width="56" class="text-center">Edit</th>
                        <th width="158">Group</th>
                        <th width="158">Sub Group</th>
                        <th width="390">Description </th>
                        <th width="178">Chargeable Amount ($) </th>
                        <th width="158">Charged Amount ($)</th>
                        <th width="80" class="text-center">Delete</th>
                    </tr>
                </thead>
                <perfect-scrollbar style="max-width: 100%; max-height: 330px;" >
                <tbody >
                    <tr  *ngFor="let item of ntsData | ntsListfilter;let i = index;">
                        <td width="56" class="text-center"> <img src="../../../../assets/images/icon/edit.png" width="15" alt="" (click)="editRow(item,i)"  /> </td>
                        <td width="158">{{(item != null)?item.group_Main:''}}</td>
                        <td width="161">{{(item != null)?item.group_Sub:''}}</td>
                        <td width="395">{{(item != null)?item.group_Description:''}}</td>
                        <td width="179">{{(item != null)?(item.chargeable_Amount | number:'2.2-2'):''}}</td>
                        <td width="158">{{(item!= null)?(item.charged_Amount | number:'2.2-2'):''}}</td>
                        <td width="80" class="text-center"> <img src="../../../../assets/images/icon/delete.png"  width="15" alt=""  (click)="deleteRow(item,i)"/> </td>
                    </tr>
                </tbody>
              </perfect-scrollbar>
            </table>
        </div>

        <div class="bottom-content">
            <div class="row">
                <div class="col-lg-6">
                    <div class="item-con mob-mb10">
                        <label class="label-nomandatory ">Total Saving:</label>
                        <div class="ip-con">
                            <app-input-dollar 
                            [value]="totalSaving"
                            [isEditMode]="false"
                            (modelChange)="totalSavingChangeHandler($event)" [placeHolder]="''"></app-input-dollar>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="nav-con mt0 mob-mb10 d-flex justify-content-end">
                        <div class="ml-auto">
                            <button class="btn btn-primary tab-w110px" type="button" (click)="closeBtnClickHandler($event)">Close</button>
                            <button class="btn btn-primary tab-w110px" type="button" (click)="submit($event)">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
